(this.webpackJsonpvisormapx=this.webpackJsonpvisormapx||[]).push([[20],{586:function(e,t,n){"use strict";t.a=n.p+"static/media/inactivo.c25580cd.svg"},666:function(e,t,n){},781:function(e,t,n){"use strict";n.r(t);var c=n(7),r=n.n(c),s=n(11),a=n(191),i=n(33),o=n(8),l=n(1),u=n(82),j=n(43),d=n(189),m=n(75),b=n(586),f=(n(666),n(2));t.default=function(e){var t=e.history,n=Object(l.useContext)(u.a),c=Object(l.useState)(!0),h=Object(i.a)(c,2),O=h[0],x=h[1],p=Object(l.useState)([]),v=Object(i.a)(p,2),k=v[0],y=v[1],g=Object(l.useState)([]),w=Object(i.a)(g,2),N=w[0],_=w[1],C=localStorage.getItem("token"),I=function(){var e=Object(s.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(s.a)(r.a.mark((function e(t){var n,c,s,a,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.u)(C);case 2:return n=e.sent,c=n.tarjetas,s=c.map((function(e){return Object(j.r)(e,C)})),e.next=7,Promise.all(s);case 7:a=e.sent,i=a.map((function(e){return{nombre:e.nombre,estado:e.estado,n_graficas:e.graficas.length,n_sensores:e.sensores.length,id:e._id}})),y(i),t(!0);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(e,n){t.push("/tarjetas/".concat(e,"/").concat(n))};return Object(l.useEffect)(Object(s.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.next=3,I();case 3:return t=setInterval(I,3e4),x(!1),e.abrupt("return",(function(){return clearInterval(t)}));case 6:case"end":return e.stop()}}),e)}))),[]),O?Object(f.jsx)("div",{style:{display:"grid",placeItems:"center",height:"40vh"},children:Object(f.jsx)(d.a,{height:"10vh"})}):Object(f.jsx)(o.m,{fluid:!0,children:Object(f.jsx)(o.M,{children:Object(f.jsx)(o.k,{sm:"12",children:Object(f.jsxs)(o.f,{className:"shadow",children:[Object(f.jsx)(o.j,{className:"contenedor-cabecera",children:Object(f.jsx)("h4",{className:"m-0",children:"Tarjetas"})}),Object(f.jsx)(o.g,{children:Object(f.jsx)(o.o,{items:k,fields:[{key:"nombre",_style:{width:"60%"}},{key:"n_graficas",_style:{width:"15%"}},{key:"n_sensores",_style:{width:"15%"}},{key:"estado",_style:{width:"10%"}},{key:"show_details",label:"",_style:{width:"1%"},sorter:!1,filter:!1}],columnFilter:!0,itemsPerPage:5,sorter:!0,responsive:!0,pagination:!0,scopedSlots:{nombre:function(e){return Object(f.jsx)("div",{className:"ml-2 mt-2 pt-1 cursor",onClick:function(){return S(e.nombre,"informacion")},children:e.nombre})},estado:function(e){var t="activo"==e.estado?m.a:b.a;return Object(f.jsx)("td",{children:Object(f.jsx)("img",{src:t,className:"icono"})})},show_details:function(e,t){return Object(f.jsx)("td",{className:"py-2",children:Object(f.jsx)(o.e,{className:"boton-elemento",size:"sm",onClick:function(){!function(e){var t=N.indexOf(e),n=N.slice();-1!==t?n.splice(t,1):n=[].concat(Object(a.a)(N),[e]),_(n)}(t)},children:N.includes(t)?"Ocultar":"Caracteristicas"})})},details:function(e,t){return Object(f.jsx)(o.l,{show:N.includes(t),children:Object(f.jsx)(o.g,{children:Object(f.jsxs)(o.M,{children:[Object(f.jsx)(o.k,{md:"3",className:"my-1",children:Object(f.jsx)(o.e,{className:"boton-elemento",onClick:function(){return S(e.nombre,"informacion")},children:"Informaci\xf3n"})}),n.find((function(e){return"TC"===e}))?Object(f.jsx)(o.k,{md:"3",className:"my-1",children:Object(f.jsx)(o.e,{className:"boton-elemento",onClick:function(){return S(e.nombre,"configuracion")},children:"Configuraci\xf3n"})}):null,n.find((function(e){return"TGI"===e}))?Object(f.jsx)(o.k,{md:"3",className:"my-1",children:Object(f.jsx)(o.e,{className:"boton-elemento",onClick:function(){return S(e.nombre,"graficas")},children:"Graficas"})}):null,n.find((function(e){return"TE"===e}))?Object(f.jsx)(o.k,{md:"3",className:"my-1",children:Object(f.jsx)(o.e,{className:"boton-elemento",onClick:function(){return S(e.nombre,"estadistica")},children:"Estadisticas"})}):null]})})})}}})})]})})})})}}}]);
//# sourceMappingURL=20.55ac72a0.chunk.js.map