(this.webpackJsonpvisormapx=this.webpackJsonpvisormapx||[]).push([[16],{578:function(e,s,c){"use strict";s.a=c.p+"static/media/inactivo.c25580cd.svg"},579:function(e,s,c){"use strict";c.d(s,"a",(function(){return i}));var n=c(1),t=c(8),a=c(80),r=(c(580),c(2)),i={TARJETA:0,ELEMENTO:1,PROYECTO:2};s.b=function(e){var s=e.activo,c=void 0===s?0:s,o=e.tipo,d=void 0===o?i.ELEMENTO:o,j=e.history,l=e.direccion,b=Object(n.useContext)(a.a),u=Object(n.useMemo)((function(){var e=[];switch(d){case i.TARJETA:e.push({titulo:"Informaci\xf3n",id:0,direccion:"informacion",key:"tinformacion"}),void 0!=b&&(b.includes("TC")&&e.push({titulo:"Configuraci\xf3n",id:1,direccion:"configuracion",key:"tconfiguracion"}),(b.includes("TGI")||b.includes("TGII"))&&e.push({titulo:"Graficas",id:2,direccion:"graficas",key:"tgraficas"}),b.includes("TE")&&e.push({titulo:"Estadistica",id:3,direccion:"estadistica",key:"testadistica"}));break;case i.ELEMENTO:e.push({titulo:"Informaci\xf3n",id:0,direccion:"informacion",key:"einformacion"}),void 0!=b&&(b.includes("EC")&&e.push({titulo:"Configuraci\xf3n",id:1,direccion:"configuracion",key:"econfiguracion"}),(b.includes("EGI")||b.includes("EGII"))&&e.push({titulo:"Graficas",id:2,direccion:"graficas",key:"egraficas"}),b.includes("EE")&&e.push({titulo:"Estadistica",id:3,direccion:"estadistica",key:"3estadistica"}));break;case i.PROYECTO:void 0!=b&&((b.includes("EGI")||b.includes("EGII"))&&e.push({titulo:"Informaci\xf3n",id:0,direccion:"informacion",key:"pinformacion"}),b.includes("EC")&&e.push({titulo:"Configuraci\xf3n",id:1,direccion:"configuracion",key:"pconfiguracion"}),b.includes("EE")&&e.push({titulo:"Estadistica",id:2,direccion:"estadistica",key:"pestadistica"}),e.push({titulo:"Elementos",id:3,direccion:"elementos",key:"pelementos"}))}return e}),[b,d]);return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(t.f,{className:"navegacion py-1",children:Object(r.jsx)("div",{className:"panel d-flex justify-content-end",children:Object(r.jsx)(t.J,{variant:"tabs",children:u.map((function(e,s){return Object(r.jsx)(t.K,{children:e.id==c?Object(r.jsx)(t.L,{className:"link",active:!0,children:e.titulo}):Object(r.jsx)(t.L,{className:"link",onClick:function(){return function(e){switch(d){case i.TARJETA:j.push("/tarjetas/".concat(l,"/").concat(u[e].direccion));break;case i.ELEMENTO:j.push("/elementos/".concat(l,"/").concat(u[e].direccion));break;case i.PROYECTO:j.push("/proyectos/".concat(l,"/").concat(u[e].direccion))}}(s)},children:e.titulo})},e.key)}))})})})})}},580:function(e,s,c){},621:function(e,s,c){},781:function(e,s,c){"use strict";c.r(s);var n=c(7),t=c.n(n),a=c(34),r=c(11),i=c(33),o=c(1),d=(c(80),c(8)),j=c(41),l=c(74),b=c(578),u=(c(621),c(2)),h=function(e){var s=e.sensor;return Object(u.jsx)(d.k,{sm:"4",children:Object(u.jsxs)(d.f,{className:"shadow",children:[Object(u.jsx)(d.j,{className:"contenedor-cabecera",children:Object(u.jsx)("h5",{children:s.nombre})}),null===s.valor?Object(u.jsx)(d.g,{children:"Informaci\xf3n no disponible"}):Object(u.jsx)(d.g,{children:Object(u.jsxs)(d.M,{className:"align-items-center justify-content-center",children:[Object(u.jsxs)(d.k,{sm:"8",children:[Object(u.jsx)("p",{children:Object(u.jsxs)("b",{children:[s.valor.toFixed(4)," ",s.unidades]})}),Object(u.jsxs)("p",{children:["NORMALIZACI\xd3N : ",s.landmark.nivel[1].toFixed(4)]}),Object(u.jsxs)("p",{children:["TENDENCIA : ",s.peligrosidad.peligrosidad[0].toFixed(4)]}),Object(u.jsxs)("p",{children:[s.estado.toUpperCase()," "]})]}),Object(u.jsx)(d.k,{md:"4",children:"activo"===s.estado&&s.landmark.nivel[1]<=1&&s.landmark.nivel[1]>=0?Object(u.jsx)("div",{className:"contenedor-icono",children:Object(u.jsx)("img",{src:l.a,className:"icono"})}):Object(u.jsx)("div",{className:"contenedor-icono",children:Object(u.jsx)("img",{src:b.a,className:"icono"})})})]})})]})})},O=function(e){var s=e.sensores;return Object(u.jsx)("div",{children:Object(u.jsx)(d.M,{children:s.map((function(e,s){return Object(u.jsx)(h,{sensor:e},s)}))})})},m=c(185),x=c(579);s.default=function(e){var s=e.match.params.nombreTarjeta,c=e.history,n=Object(o.useState)({SA:0,SI:0,GA:0,GI:0}),f=Object(i.a)(n,2),p=f[0],g=f[1],v=localStorage.getItem("token"),k=s,E=Object(o.useState)(!1),N=Object(i.a)(E,2),I=(N[0],N[1]),y=Object(o.useState)([]),T=Object(i.a)(y,2),A=T[0],G=T[1],S=Object(o.useState)([]),w=Object(i.a)(S,2),M=w[0],C=w[1],L=Object(o.useState)({estado:"inactivo",icono:b.a}),J=Object(i.a)(L,2),R=J[0],P=J[1],Y=Object(o.useState)(!0),F=Object(i.a)(Y,2),K=F[0],U=F[1],z=function(){var e=Object(r.a)(t.a.mark((function e(){var s,c,n,r,o,d,u,h,O,m,x,f,p,E,N,y,T,A,S;return t.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.r)(k,v);case 2:return s=e.sent,c=s.graficas,n=s.sensores,r=s.estado,o=[],n.forEach((function(e){o.push("".concat(k,".S").concat(e.index))})),e.next=10,Promise.all([Object(j.i)(o,v,1),Object(j.h)(o,v,1),Object(j.j)(o,v,1)]);case 10:for(d=e.sent,u=Object(i.a)(d,3),h=u[0],O=u[1],m=u[2],x=[],f=0;f<h.sensores[0].length;f++)x.push(Object(a.a)(Object(a.a)(Object(a.a)({nombre:n[f].nombre,alias:n[f].alias,estado:n[f].estado,unidades:n[f].unidades,min:n[f].parametros.rango[0],max:n[f].parametros.rango[1]},h.sensores[0][f]),O.sensores[0][f]),m.sensores[0][f]));p=0,E=0,N=0,y=0,T=[],c.forEach((function(e){for(var s=[],c=function(c){var t=[];e.sensores.forEach((function(e){"activo"===n[e].estado&&(p+=1,t.push(Object(a.a)(Object(a.a)(Object(a.a)({nombre:n[e].nombre,alias:n[e].alias,estado:n[e].estado,unidades:n[e].unidades,min:n[e].parametros.rango[0],max:n[e].parametros.rango[1]},h.sensores[c][e]),O.sensores[c][e]),m.sensores[c][e]))),"inactivo"===n[e].estado&&(E+=1)})),t.length>0&&(N+=1),t.length<1&&(y+=1),s.push(t)},t=0;t<h.sensores.length;t++)c(t);T.push({nombre:e.nombre,sensores:s})})),g({SA:p,SI:E,GA:N,GI:y}),C(x),G(T),I(!0),A="activo"==r?l.a:b.a,S=r[0].toUpperCase()+r.substring(1),P({estado:S,icono:A});case 30:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)(Object(r.a)(t.a.mark((function e(){var s;return t.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z();case 2:return s=void setInterval(Object(r.a)(t.a.mark((function e(){var s,c,n,r,o,d,u,h,O,m,x,f,p,E,N,y,T,A,S;return t.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.r)(k,v);case 2:return s=e.sent,c=s.graficas,n=s.sensores,r=s.estado,o=[],n.forEach((function(e){o.push("".concat(k,".S").concat(e.index))})),e.next=10,Promise.all([Object(j.i)(o,v,1),Object(j.h)(o,v,1),Object(j.j)(o,v,1)]);case 10:d=e.sent,u=Object(i.a)(d,3),h=u[0],O=u[1],m=u[2],h.sensores=h.sensores.reverse(),O.sensores=O.sensores.reverse(),m.sensores=m.sensores.reverse(),x=[],f=0;case 20:if(!(f<h.sensores[0].length)){e.next=29;break}if(null!==h.sensores[0][f].valor){e.next=25;break}return e.abrupt("continue",26);case 25:x.push(Object(a.a)(Object(a.a)(Object(a.a)({nombre:n[f].nombre,alias:n[f].alias,estado:n[f].estado,unidades:n[f].unidades,min:n[f].parametros.rango[0],max:n[f].parametros.rango[1]},h.sensores[0][f]),O.sensores[0][f]),m.sensores[0][f]));case 26:f++,e.next=20;break;case 29:if(p=0,E=0,N=0,y=0,T=[],!(x.length<1)){e.next=38;break}return e.abrupt("return");case 38:c.forEach((function(e){for(var s=[],c=function(c){var t=[];e.sensores.forEach((function(e){"activo"===n[e].estado&&(p+=1,t.push(Object(a.a)(Object(a.a)(Object(a.a)({nombre:n[e].nombre,alias:n[e].alias,estado:n[e].estado,unidades:n[e].unidades,min:n[e].parametros.rango[0],max:n[e].parametros.rango[1]},h.sensores[c][e]),O.sensores[c][e]),m.sensores[c][e]))),"inactivo"===n[e].estado&&(E+=1)})),t.length>0&&(N+=1),t.length<1&&(y+=1),s.push(t)},t=0;t<h.sensores.length;t++)c(t);T.push({nombre:e.nombre,sensores:s})})),g({SA:p,SI:E,GA:N,GI:y}),C(x),G(T),I(!0),A="activo"==r?l.a:b.a,S=r[0].toUpperCase()+r.substring(1),P({estado:S,icono:A});case 46:case"end":return e.stop()}}),e)}))),3e4),U(!1),e.abrupt("return",(function(){return clearInterval(s)}));case 5:case"end":return e.stop()}}),e)}))),[]),K?Object(u.jsx)("div",{style:{display:"grid",placeItems:"center",height:"40vh"},children:Object(u.jsx)(m.a,{height:"10vh"})}):Object(u.jsxs)(d.m,{fluid:!0,children:[Object(u.jsx)(x.b,{activo:0,tipo:x.a.TARJETA,history:c,direccion:k}),Object(u.jsx)(d.M,{children:Object(u.jsx)(d.k,{sm:"12",children:Object(u.jsx)(d.f,{className:"shadow",children:Object(u.jsx)(d.g,{className:"shadow",children:Object(u.jsxs)(d.M,{className:"justify-content-between",children:[Object(u.jsxs)(d.k,{className:"col-3 d-flex align-items-center",children:[Object(u.jsx)("img",{src:R.icono,className:"icono"}),Object(u.jsx)("h4",{className:"ml-2",children:R.estado})]}),Object(u.jsxs)(d.k,{className:"col-9 text-right",children:[Object(u.jsx)("h5",{children:"Tarjeta"}),Object(u.jsx)("h3",{children:k})]})]})})})})}),Object(u.jsx)(d.M,{children:Object(u.jsx)(d.k,{children:Object(u.jsxs)(d.f,{className:"shadow",children:[Object(u.jsx)(d.j,{className:"contenedor-cabecera-principal",children:"General"}),Object(u.jsx)(d.g,{className:"shadow",children:Object(u.jsxs)(d.H,{accent:!0,children:[Object(u.jsxs)(d.M,{className:"justify-content-end",children:[Object(u.jsx)(d.k,{sm:"4",className:"align-self-center encabezado_general",children:"Sensores"}),Object(u.jsx)(d.k,{sm:"4",className:"align-self-center encabezado_general",children:"Graficas"})]}),Object(u.jsxs)(d.M,{children:[Object(u.jsx)(d.k,{sm:"4",children:Object(u.jsx)(d.I,{accent:"dark",children:"Activos :"})}),Object(u.jsx)(d.k,{sm:"4",className:"align-self-center",children:p.SA}),Object(u.jsx)(d.k,{sm:"4",className:"align-self-center",children:p.GA})]}),Object(u.jsxs)(d.M,{children:[Object(u.jsx)(d.k,{sm:"4",children:Object(u.jsx)(d.I,{accent:"dark",children:"Inactivos :"})}),Object(u.jsx)(d.k,{sm:"4",className:"align-self-center",children:p.SI}),Object(u.jsx)(d.k,{sm:"4",className:"align-self-center",children:p.GI})]}),Object(u.jsxs)(d.M,{children:[Object(u.jsx)(d.k,{sm:"4",children:Object(u.jsx)(d.I,{accent:"dark",children:"Totales :"})}),Object(u.jsx)(d.k,{sm:"4",className:"align-self-center",children:p.SA+p.SI}),Object(u.jsx)(d.k,{sm:"4",className:"align-self-center",children:p.GA+p.GI})]})]})})]})})}),Object(u.jsx)(d.M,{children:Object(u.jsx)(d.k,{children:Object(u.jsxs)(d.f,{className:"shadow",children:[Object(u.jsx)(d.j,{className:"contenedor-cabecera-principal",children:"Sensores"}),Object(u.jsx)(d.g,{children:Object(u.jsxs)(d.Z,{activeTab:"grupos",children:[Object(u.jsxs)(d.J,{variant:"tabs",children:[Object(u.jsx)(d.K,{children:Object(u.jsx)(d.L,{"data-tab":"grupos",children:"Grupos"})}),Object(u.jsx)(d.K,{children:Object(u.jsx)(d.L,{"data-tab":"todos",children:"Todos"})})]}),Object(u.jsxs)(d.X,{className:"mt-4",children:[Object(u.jsx)(d.Y,{"data-tab":"grupos",children:A.map((function(e,s){return Object(u.jsxs)(d.f,{children:[Object(u.jsx)(d.j,{className:"contenedor-cabecera-grafica",children:Object(u.jsx)("h4",{children:e.nombre})}),Object(u.jsx)(d.g,{children:Object(u.jsx)(O,{sensores:e.sensores[0]})})]},s)}))}),Object(u.jsx)(d.Y,{"data-tab":"todos",children:Object(u.jsx)(d.M,{children:M.map((function(e,s){return Object(u.jsx)(h,{sensor:e},s)}))})})]})]})})]})})})]})}}}]);
//# sourceMappingURL=16.391fa73d.chunk.js.map