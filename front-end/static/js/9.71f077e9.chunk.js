(this.webpackJsonpvisormapx=this.webpackJsonpvisormapx||[]).push([[9],{586:function(e,c,s){"use strict";c.a=s.p+"static/media/inactivo.c25580cd.svg"},587:function(e,c,s){"use strict";s.d(c,"a",(function(){return r}));var n=s(1),t=s(8),i=s(82),a=(s(588),s(2)),r={TARJETA:0,ELEMENTO:1,PROYECTO:2};c.b=function(e){var c=e.activo,s=void 0===c?0:c,o=e.tipo,l=void 0===o?r.ELEMENTO:o,d=e.history,j=e.direccion,b=Object(n.useContext)(i.a),u=Object(n.useMemo)((function(){var e=[];switch(l){case r.TARJETA:e.push({titulo:"Informaci\xf3n",id:0,direccion:"informacion",key:"tinformacion"}),void 0!=b&&(b.includes("TC")&&e.push({titulo:"Configuraci\xf3n",id:1,direccion:"configuracion",key:"tconfiguracion"}),(b.includes("TGI")||b.includes("TGII"))&&e.push({titulo:"Graficas",id:2,direccion:"graficas",key:"tgraficas"}),b.includes("TE")&&e.push({titulo:"Estadistica",id:3,direccion:"estadistica",key:"testadistica"}));break;case r.ELEMENTO:e.push({titulo:"Informaci\xf3n",id:0,direccion:"informacion",key:"einformacion"}),void 0!=b&&(b.includes("EC")&&e.push({titulo:"Configuraci\xf3n",id:1,direccion:"configuracion",key:"econfiguracion"}),(b.includes("EGI")||b.includes("EGII"))&&e.push({titulo:"Graficas",id:2,direccion:"graficas",key:"egraficas"}),b.includes("EE")&&e.push({titulo:"Estadistica",id:3,direccion:"estadistica",key:"3estadistica"}));break;case r.PROYECTO:void 0!=b&&((b.includes("EGI")||b.includes("EGII"))&&e.push({titulo:"Informaci\xf3n",id:0,direccion:"informacion",key:"pinformacion"}),b.includes("EC")&&e.push({titulo:"Configuraci\xf3n",id:1,direccion:"configuracion",key:"pconfiguracion"}),b.includes("EE")&&e.push({titulo:"Estadistica",id:2,direccion:"estadistica",key:"pestadistica"}),e.push({titulo:"Elementos",id:3,direccion:"elementos",key:"pelementos"}))}return e}),[b,l]);return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(t.f,{className:"navegacion py-1",children:Object(a.jsx)("div",{className:"panel d-flex justify-content-end",children:Object(a.jsx)(t.J,{variant:"tabs",children:u.map((function(e,c){return Object(a.jsx)(t.K,{children:e.id==s?Object(a.jsx)(t.L,{className:"link",active:!0,children:e.titulo}):Object(a.jsx)(t.L,{className:"link",onClick:function(){return function(e){switch(l){case r.TARJETA:d.push("/tarjetas/".concat(j,"/").concat(u[e].direccion));break;case r.ELEMENTO:d.push("/elementos/".concat(j,"/").concat(u[e].direccion));break;case r.PROYECTO:d.push("/proyectos/".concat(j,"/").concat(u[e].direccion))}}(c)},children:e.titulo})},e.key)}))})})})})}},588:function(e,c,s){},652:function(e,c,s){},792:function(e,c,s){"use strict";s.r(c);var n=s(7),t=s.n(n),i=s(34),a=s(11),r=s(33),o=s(1),l=s(8),d=(s(652),s(43)),j=s(75),b=s(586),u=s(2),h=function(e){var c=e.sensor,s=(c.estado[0].toUpperCase(),c.estado.substring(1),"activo"==c.estado);s?j.a:b.a;return Object(u.jsx)(l.k,{sm:"4",children:Object(u.jsxs)(l.f,{className:"shadow",children:[Object(u.jsx)(l.j,{className:"contenedor-cabecera",children:Object(u.jsx)("h5",{className:"m-0",children:c.nombre})}),null!==c.basica&&c.valor&&s?Object(u.jsx)(l.g,{children:Object(u.jsxs)(l.M,{className:"align-items-center justify-content-center",children:[Object(u.jsxs)(l.k,{sm:"8",children:[Object(u.jsx)("p",{children:Object(u.jsxs)("b",{children:[" ",c.valor?c.valor.toFixed(2):"-"," ",c.unidades]})}),"S"==c.tipo?Object(u.jsxs)("p",{children:["NORMALIZACI\xd3N : ",c.landmark.nivel[1].toFixed(4)]}):void 0,"S"==c.tipo?Object(u.jsxs)("p",{children:["TENDENCIA : ",c.peligrosidad.peligrosidad[0].toFixed(4)]}):void 0,Object(u.jsxs)("p",{children:[c.estado.toUpperCase()," "]})]}),Object(u.jsx)(l.k,{md:"4",children:"S"==c.tipo?"activo"==c.estado&&c.landmark.nivel[1]<=1&&c.landmark.nivel[1]>=0?Object(u.jsx)("div",{className:"contenedor-icono",children:Object(u.jsx)("img",{src:j.a,className:"icono"})}):Object(u.jsx)("div",{className:"contenedor-icono",children:Object(u.jsx)("img",{src:b.a,className:"icono"})}):"activo"==c.estado?Object(u.jsx)("div",{className:"contenedor-icono",children:Object(u.jsx)("img",{src:j.a,className:"icono"})}):Object(u.jsx)("div",{className:"contenedor-icono",children:Object(u.jsx)("img",{src:b.a,className:"icono"})})})]})}):Object(u.jsx)(l.g,{children:"Informaci\xf3n no disponible"})]})})},O=function(e){var c=e.sensores;return Object(u.jsx)("div",{children:Object(u.jsx)(l.M,{children:c.valores.map((function(e,c){return Object(u.jsx)(h,{sensor:e},"graficas_sensor"+c)}))})})},x=s(587),m=s(24),f=s(189);c.default=function(e){var c=e.match.params.idElemento,s=e.history,n=Object(o.useState)([]),p=Object(r.a)(n,2),g=p[0],v=p[1],k=Object(o.useState)([]),N=Object(r.a)(k,2),I=N[0],E=N[1],y=Object(o.useState)(!0),M=Object(r.a)(y,2),A=M[0],T=M[1],S=Object(o.useRef)(null),G=Object(o.useState)({nombre:"",descripcion:"",area:"",linea:"",tipo:"",proceso:"",estado:"inactivo",icono:b.a}),C=Object(r.a)(G,2),w=C[0],V=C[1],L=Object(o.useState)({SA:0,SI:0,GA:0,GI:0,VA:0,VI:0}),R=Object(r.a)(L,2),J=R[0],P=R[1],Y=localStorage.getItem("token"),F=c,_=function(){var e=Object(a.a)(t.a.mark((function e(){var s,n,a,o,l,u,h,O,x,m,f,p,g,k,N,I,y,M,A,T,S,G,C,w,L,R,J,_,z,U,D,H,K;return t.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!=c){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(d.d)(Y,F);case 4:return s=e.sent,n=s.nombre,a=s.identificador,o=s.descripcion,l=s.area,u=s.linea,h=s.proceso,O=s.tipo,x=s.estado,m=s.sensores,f=s.variables,p=s.graficas,g="",m.length>0&&(g=m[0].direccion.substr(0,5)),e.next=20,Object(d.n)(g,Y);case 20:return k=e.sent,N=k.sensores,I=[],y=[],f.forEach((function(e){y.push("".concat(F,".V").concat(e.index))})),m.forEach((function(e){I.push("".concat(e.direccion))})),e.next=28,Promise.all([Object(d.i)(I,Y,1),Object(d.h)(I,Y,1),Object(d.j)(I,Y,1),Object(d.f)(y,Y,1)]);case 28:M=e.sent,A=Object(r.a)(M,4),T=A[0].sensores,S=A[1],G=A[2],C=A[3].variables,w=[],m.map((function(e,c){var s=e.direccion,n=s.substring(s.indexOf(".")+2),t=N.find((function(e){return e.index===parseInt(n)}));w.push(Object(i.a)(Object(i.a)(Object(i.a)({nombre:t.nombre,alias:t.alias,estado:t.estado,unidades:t.unidades,tipo:"S"},T[0][c]),S.sensores[0][c]),G.sensores[0][c]))})),f.forEach((function(e,c){w.push(Object(i.a)({nombre:e.nombre,alias:e.alias,estado:e.estado,unidades:e.unidades,tipo:"V"},C[0][c]))})),v(w),L=0,R=0,J=0,_=0,z=0,U=0,D=[],p.forEach((function(e){var c=[];e.direcciones.forEach((function(e){if("V"===e[0]){var s=f.find((function(c){return c.index===parseInt(e.substring(1))}));"activo"===s.estado?(z+=1,c.push(Object(i.a)({nombre:s.nombre,alias:s.alias,estado:s.estado,unidades:s.unidades,tipo:"V"},C[0][parseInt(s.index)]))):U+=1}else{var n=parseInt(e.substring(1)),t=m[n].direccion,a=t.slice(t.indexOf(".")+2,t.length),r=N.find((function(e){return e.index===parseInt(a)}));"activo"===r.estado?(L+=1,c.push(Object(i.a)(Object(i.a)(Object(i.a)({nombre:r.nombre,alias:r.alias,estado:r.estado,unidades:r.unidades,tipo:"S"},T[0][n]),S.sensores[0][n]),G.sensores[0][n]))):R+=1}})),c.length>0?(J+=1,D.push("V"===e.direcciones[0][0]?{nombre:e.nombre,datos:{tipo:"variables",valores:c}}:{nombre:e.nombre,datos:{tipo:"sensores",valores:c}})):_+=1})),E(D),H="activo"==x?j.a:b.a,K=x[0].toUpperCase()+x.substring(1),V({nombre:n,identificador:a,descripcion:o,area:l,linea:u,tipo:O,proceso:h,estado:K,icono:H}),P({SA:L,SI:R,GA:J,GI:_,VA:z,VI:U});case 51:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)(Object(a.a)(t.a.mark((function e(){return t.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(function(){null!=S.current&&clearInterval(S.current)}));case 1:case"end":return e.stop()}}),e)}))),[]),Object(o.useEffect)(Object(a.a)(t.a.mark((function e(){return t.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T(!0),null!=S.current&&(clearInterval(S.current),S.current=null),e.next=4,_();case 4:S.current=setInterval(_,3e4),T(!1);case 6:case"end":return e.stop()}}),e)}))),[c]),void 0==c?Object(u.jsx)(m.a,{to:"/"}):A?Object(u.jsx)("div",{style:{display:"grid",placeItems:"center",height:"40vh"},children:Object(u.jsx)(f.a,{height:"10vh"})}):Object(u.jsxs)(l.m,{fluid:!0,children:[Object(u.jsx)(x.b,{activo:0,tipo:x.a.ELEMENTO,history:s,direccion:F}),Object(u.jsx)(l.M,{children:Object(u.jsx)(l.k,{sm:"12",children:Object(u.jsx)(l.f,{className:"shadow",children:Object(u.jsx)(l.g,{children:Object(u.jsxs)(l.M,{className:"justify-content-between",children:[Object(u.jsxs)(l.k,{className:"col-3 d-flex align-items-center",children:[Object(u.jsx)("img",{src:w.icono,className:"icono"}),Object(u.jsx)("h4",{className:"ml-2",children:w.estado})]}),Object(u.jsxs)(l.k,{className:"col-9 text-right",children:[Object(u.jsx)("h5",{children:"Proyecto"}),Object(u.jsx)("h3",{children:"".concat(w.nombre)})]})]})})})})}),Object(u.jsx)(l.M,{children:Object(u.jsx)(l.k,{children:Object(u.jsxs)(l.f,{className:"shadow",children:[Object(u.jsx)(l.j,{className:"contenedor-cabecera-principal",children:"General"}),Object(u.jsxs)(l.g,{children:[Object(u.jsxs)(l.H,{accent:!0,children:[Object(u.jsxs)(l.M,{children:[Object(u.jsx)(l.k,{sm:"4",children:Object(u.jsx)(l.I,{accent:"info",children:"Identificador :"})}),Object(u.jsx)(l.k,{sm:"4",className:"align-self-center",children:w.identificador})]}),Object(u.jsxs)(l.M,{children:[Object(u.jsx)(l.k,{sm:"4",children:Object(u.jsx)(l.I,{accent:"info",children:"Descripcion :"})}),Object(u.jsx)(l.k,{sm:"4",className:"align-self-center",children:w.descripcion})]}),Object(u.jsxs)(l.M,{children:[Object(u.jsx)(l.k,{sm:"4",children:Object(u.jsx)(l.I,{accent:"info",children:"Area :"})}),Object(u.jsx)(l.k,{sm:"4",className:"align-self-center",children:w.area})]}),Object(u.jsxs)(l.M,{children:[Object(u.jsx)(l.k,{sm:"4",children:Object(u.jsx)(l.I,{accent:"info",children:"Linea :"})}),Object(u.jsx)(l.k,{sm:"4",className:"align-self-center",children:w.linea})]}),Object(u.jsxs)(l.M,{children:[Object(u.jsx)(l.k,{sm:"4",children:Object(u.jsx)(l.I,{accent:"info",children:"Proceso :"})}),Object(u.jsx)(l.k,{sm:"4",className:"align-self-center",children:w.proceso})]}),Object(u.jsxs)(l.M,{children:[Object(u.jsx)(l.k,{sm:"4",children:Object(u.jsx)(l.I,{accent:"info",children:"Tipo :"})}),Object(u.jsx)(l.k,{sm:"4",className:"align-self-center",children:w.tipo})]})]}),Object(u.jsx)("hr",{}),Object(u.jsxs)(l.H,{accent:!0,children:[Object(u.jsxs)(l.M,{className:"justify-content-end",children:[Object(u.jsx)(l.k,{sm:"3",className:"align-self-center encabezado_general",children:"Sensores"}),Object(u.jsx)(l.k,{sm:"3",className:"align-self-center encabezado_general",children:"Variables"}),Object(u.jsx)(l.k,{sm:"3",className:"align-self-center encabezado_general",children:"Grupos"})]}),Object(u.jsxs)(l.M,{children:[Object(u.jsx)(l.k,{sm:"3",children:Object(u.jsx)(l.I,{accent:"dark",children:"Inactivos :"})}),Object(u.jsx)(l.k,{sm:"3",className:"align-self-center",children:J.SI}),Object(u.jsx)(l.k,{sm:"3",className:"align-self-center",children:J.VI}),Object(u.jsx)(l.k,{sm:"3",className:"align-self-center",children:J.GI})]}),Object(u.jsxs)(l.M,{children:[Object(u.jsx)(l.k,{sm:"3",children:Object(u.jsx)(l.I,{accent:"dark",children:"Activos :"})}),Object(u.jsx)(l.k,{sm:"3",className:"align-self-center",children:J.SA}),Object(u.jsx)(l.k,{sm:"3",className:"align-self-center",children:J.VA}),Object(u.jsx)(l.k,{sm:"3",className:"align-self-center",children:J.GA})]}),Object(u.jsxs)(l.M,{children:[Object(u.jsx)(l.k,{sm:"3",children:Object(u.jsx)(l.I,{accent:"dark",children:"Totales :"})}),Object(u.jsx)(l.k,{sm:"3",className:"align-self-center",children:J.SA+J.SI}),Object(u.jsx)(l.k,{sm:"3",className:"align-self-center",children:J.VA+J.VI}),Object(u.jsx)(l.k,{sm:"3",className:"align-self-center",children:J.GA+J.GI})]})]})]})]})})}),Object(u.jsx)(l.M,{children:Object(u.jsx)(l.k,{children:Object(u.jsxs)(l.f,{className:"shadow",children:[Object(u.jsx)(l.j,{className:"contenedor-cabecera-principal",children:"Sensores / Variables"}),Object(u.jsx)(l.g,{children:Object(u.jsxs)(l.Z,{activeTab:"grupos",children:[Object(u.jsx)(l.J,{variant:"tabs",children:Object(u.jsx)(l.K,{children:Object(u.jsx)(l.L,{"data-tab":"grupos",children:"Grupos"})})}),Object(u.jsxs)(l.X,{className:"mt-4",children:[Object(u.jsx)(l.Y,{"data-tab":"grupos",children:I.map((function(e,c){return Object(u.jsxs)(l.f,{children:[Object(u.jsx)(l.j,{className:"contenedor-cabecera-grafica",children:Object(u.jsx)("h4",{children:e.nombre})}),Object(u.jsx)(l.g,{children:Object(u.jsx)(O,{sensores:e.datos})})]},"grupos"+c)}))}),Object(u.jsx)(l.Y,{"data-tab":"todos",children:Object(u.jsx)(l.M,{children:g.map((function(e,c){return Object(u.jsx)(h,{sensor:e},"todos"+c)}))})})]})]})})]})})})]})}}}]);
//# sourceMappingURL=9.71f077e9.chunk.js.map