(this.webpackJsonpvisormapx=this.webpackJsonpvisormapx||[]).push([[8],{586:function(e,t,c){"use strict";t.a=c.p+"static/media/inactivo.c25580cd.svg"},587:function(e,t,c){"use strict";c.d(t,"a",(function(){return i}));var n=c(1),s=c(8),r=c(82),a=(c(588),c(2)),i={TARJETA:0,ELEMENTO:1,PROYECTO:2};t.b=function(e){var t=e.activo,c=void 0===t?0:t,o=e.tipo,l=void 0===o?i.ELEMENTO:o,u=e.history,d=e.direccion,j=Object(n.useContext)(r.a),b=Object(n.useMemo)((function(){var e=[];switch(l){case i.TARJETA:e.push({titulo:"Informaci\xf3n",id:0,direccion:"informacion",key:"tinformacion"}),void 0!=j&&(j.includes("TC")&&e.push({titulo:"Configuraci\xf3n",id:1,direccion:"configuracion",key:"tconfiguracion"}),(j.includes("TGI")||j.includes("TGII"))&&e.push({titulo:"Graficas",id:2,direccion:"graficas",key:"tgraficas"}),j.includes("TE")&&e.push({titulo:"Estadistica",id:3,direccion:"estadistica",key:"testadistica"}));break;case i.ELEMENTO:e.push({titulo:"Informaci\xf3n",id:0,direccion:"informacion",key:"einformacion"}),void 0!=j&&(j.includes("EC")&&e.push({titulo:"Configuraci\xf3n",id:1,direccion:"configuracion",key:"econfiguracion"}),(j.includes("EGI")||j.includes("EGII"))&&e.push({titulo:"Graficas",id:2,direccion:"graficas",key:"egraficas"}),j.includes("EE")&&e.push({titulo:"Estadistica",id:3,direccion:"estadistica",key:"3estadistica"}));break;case i.PROYECTO:void 0!=j&&((j.includes("EGI")||j.includes("EGII"))&&e.push({titulo:"Informaci\xf3n",id:0,direccion:"informacion",key:"pinformacion"}),j.includes("EC")&&e.push({titulo:"Configuraci\xf3n",id:1,direccion:"configuracion",key:"pconfiguracion"}),j.includes("EE")&&e.push({titulo:"Estadistica",id:2,direccion:"estadistica",key:"pestadistica"}),e.push({titulo:"Elementos",id:3,direccion:"elementos",key:"pelementos"}))}return e}),[j,l]);return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(s.f,{className:"navegacion py-1",children:Object(a.jsx)("div",{className:"panel d-flex justify-content-end",children:Object(a.jsx)(s.J,{variant:"tabs",children:b.map((function(e,t){return Object(a.jsx)(s.K,{children:e.id==c?Object(a.jsx)(s.L,{className:"link",active:!0,children:e.titulo}):Object(a.jsx)(s.L,{className:"link",onClick:function(){return function(e){switch(l){case i.TARJETA:u.push("/tarjetas/".concat(d,"/").concat(b[e].direccion));break;case i.ELEMENTO:u.push("/elementos/".concat(d,"/").concat(b[e].direccion));break;case i.PROYECTO:u.push("/proyectos/".concat(d,"/").concat(b[e].direccion))}}(t)},children:e.titulo})},e.key)}))})})})})}},588:function(e,t,c){},594:function(e,t,c){},785:function(e,t,c){"use strict";c.r(t);var n=c(7),s=c.n(n),r=c(11),a=c(33),i=c(1),o=c(8),l=c(34),u=c(43),d=c(191),j=c(589),b=(c(594),c(590)),h=c(190),f=c(2),O=function(e,t,c,n){var s=[],r=[];return e.length>1&&e.forEach((function(e){void 0==e?s.push("-"):s.push(e.slice(11,e.length))})),t.forEach((function(e,t){r.push({label:"".concat(n[t].alias),data:e,fill:!1,backgroundColor:"rgb(".concat(c[t],")"),borderColor:"rgb(".concat(c[t],", 0.2)")})})),{labels:s,datasets:r}},x={scales:{y:{grace:"0.25%"}},plugins:{zoom:{pan:{enabled:!0,mode:"xy"},zoom:{wheel:{enabled:!0},pinch:{enabled:!0},mode:"xy",onZoomComplete:function(e){e.chart.update("none")}}}},maintainAspectRatio:!1},m=["81,205,160","109,120,173","224,125,117"],p=function(e){var t=e.sensores,c=Object(i.useRef)(null),n=h.a.getState().graficasDatos,s=t[0].map((function(){return[]})),r=Object(i.useState)([]),l=Object(a.a)(r,2),u=l[0],p=l[1],g=Object(i.useState)(),v=Object(a.a)(g,2),E=v[0],k=v[1],N=Object(i.useState)(s),I=Object(a.a)(N,2),y=I[0],w=I[1],S=function(e,t){return e.length<n.corto?[].concat(Object(d.a)(e),[t]):[].concat(Object(d.a)(e.slice(e.length-(n.corto-1),e.length)),[t])};return Object(i.useEffect)((function(){j.a.register(b.a),t.length>1?function(){var e=[],c=Object(d.a)(s);t.forEach((function(t){e.push(t[0].fecha);for(var n=[],s=0;s<t.length;s++)n.push(S(c[s],t[s].valor));c=[].concat(n)})),w(c),p(e)}():1==t.length&&(p((function(e){return S(e,t[0][0].fecha)})),w((function(e){for(var c=[],n=0;n<t[0].length;n++)c.push(S(e[n],t[0][n].valor));return c})))}),[t]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"container-fluid",style:{minHeight:"40vh",maxHeight:"50vh"},children:[Object(f.jsx)(j.b,{data:O(u,y,m,t[0]),options:x,ref:c}),Object(f.jsx)(o.e,{className:"boton-reset",onClick:function(){c.current.resetZoom()},children:"Restablecer Zoom"})]}),Object(f.jsx)("div",{className:"mt-5",children:t[0].map((function(e,t){return Object(f.jsx)("div",{id:"accordion",children:Object(f.jsxs)(o.f,{className:"mb-0",children:[Object(f.jsx)(o.j,{className:"contenedor-cabecera",children:Object(f.jsx)(o.e,{block:!0,className:"text-left m-0 p-0 ",onClick:function(){return k(E===t?null:t)},children:Object(f.jsx)("h5",{className:"m-0 p-0",children:Object(f.jsxs)("span",{className:"text-color",children:[e.tipo," - ",e.nombre," (",e.alias,")"]})})})}),Object(f.jsx)(o.l,{show:E===t,children:Object(f.jsxs)(o.g,{children:[Object(f.jsx)("pre",{children:Object(f.jsxs)("h6",{children:["Fecha : ",u[u.length-1]," "]})}),Object(f.jsx)("pre",{children:Object(f.jsxs)("h6",{children:["Valor (actual) :"," ",void 0!=y[t][y[t].length-1]?y[t][y[t].length-1].toFixed(4):0]})})]})})]})},t)}))})]})},g=function(e,t,c,n){var s=[],r=[];return e.length>1&&e.forEach((function(e){s.push(e.slice(11,e.length))})),t.forEach((function(e,t){r.push({label:"".concat(n[t].alias),data:e,fill:!1,backgroundColor:"rgb(".concat(c[t],")"),borderColor:"rgb(".concat(c[t],", 0.2)")})})),{labels:s,datasets:r}},v={scales:{y:{grace:"0.25%"}},plugins:{zoom:{pan:{enabled:!0,mode:"xy"},zoom:{wheel:{enabled:!0},pinch:{enabled:!0},mode:"xy",onZoomComplete:function(e){e.chart.update("none")}}}}},E=["81,205,160","109,120,173","224,125,117"],k=function(e){var t=e.sensores,c=Object(i.useRef)(null),n=h.a.getState().graficasDatos,s=t[0].map((function(){return[]})),r=Object(i.useState)(),l=Object(a.a)(r,2),u=l[0],O=l[1],x=Object(i.useState)([]),m=Object(a.a)(x,2),p=m[0],k=m[1],N=Object(i.useState)(s),I=Object(a.a)(N,2),y=I[0],w=I[1],S=function(e,t){return e.length<n.corto?[].concat(Object(d.a)(e),[t]):[].concat(Object(d.a)(e.slice(e.length-(n.corto-1),e.length)),[t])};return Object(i.useEffect)((function(){j.a.register(b.a),t.length>1?function(){var e=[],c=Object(d.a)(s);t.forEach((function(t){e.push(t[0].fecha);for(var n=[],s=0;s<t.length;s++)n.push(S(c[s],t[s].landmark.nivel[1]));c=[].concat(n)})),w(c),k(e)}():1==t.length&&(k((function(e){return S(e,t[0][0].fecha)})),w((function(e){for(var c=[],n=0;n<t[0].length;n++)c.push(S(e[n],t[0][n].landmark.nivel[1]));return c})))}),[t]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(j.b,{data:g(p,y,E,t[0]),options:v,ref:c}),Object(f.jsx)(o.e,{className:"boton-reset",onClick:function(){c.current.resetZoom()},children:"Restablecer Zoom"}),Object(f.jsx)("div",{className:"mt-4",children:t[0].map((function(e,t){return Object(f.jsx)("div",{id:"accordion",children:Object(f.jsxs)(o.f,{className:"mb-0 shadow",children:[Object(f.jsx)(o.j,{className:"contenedor-cabecera",children:Object(f.jsx)(o.e,{block:!0,className:"text-left m-0 p-0 ",onClick:function(){return O(u===t?null:t)},children:Object(f.jsx)("h5",{className:"m-0 p-0",children:Object(f.jsxs)("span",{className:"text-color",children:[e.tipo," - ",e.nombre," (",e.alias,")"]})})})}),Object(f.jsx)(o.l,{show:u===t,children:Object(f.jsxs)(o.g,{children:[Object(f.jsx)("pre",{children:Object(f.jsxs)("h6",{children:["Fecha : ",e.fecha," "]})}),Object(f.jsx)("pre",{children:Object(f.jsxs)("h6",{children:["Valor (actual) :",e.landmark.nivel[1]?e.landmark.nivel[1].toFixed(4):"-"]})}),Object(f.jsx)("pre",{children:Object(f.jsxs)("h6",{children:["Cambio t :",e.landmark.deltai?(e.landmark.deltai/2).toFixed(4):"-","min"]})}),Object(f.jsx)("pre",{children:Object(f.jsxs)("h6",{children:["Cambio f(t) :",e.landmark.deltay?e.landmark.deltay.toFixed(4):"-"]})})]})})]})},t)}))})]})},N=function(e,t,c,n){var s=[],r=[];return e.length>1&&e.forEach((function(e){s.push(e.slice(11,e.length))})),t.forEach((function(e,t){r.push({label:"".concat(n[t].alias),data:e,fill:!1,backgroundColor:"rgb(".concat(c[t],")"),borderColor:"rgb(".concat(c[t],", 0.2)")})})),{labels:s,datasets:r}},I={scales:{y:{grace:"0.25%"}},plugins:{zoom:{pan:{enabled:!0,mode:"xy"},zoom:{wheel:{enabled:!0},pinch:{enabled:!0},mode:"xy",onZoomComplete:function(e){e.chart.update("none")}}}},maintainAspectRatio:!1},y=["81,205,160","109,120,173","224,125,117"],w=function(e){var t=e.sensores,c=Object(i.useRef)(null),n=t[0].map((function(){return[]})),s=h.a.getState().graficasDatos,r=Object(i.useState)(),l=Object(a.a)(r,2),u=l[0],O=l[1],x=Object(i.useState)([]),m=Object(a.a)(x,2),p=m[0],g=m[1],v=Object(i.useState)(n),E=Object(a.a)(v,2),k=E[0],w=E[1],S=function(e,t){return e.length<s.corto?[].concat(Object(d.a)(e),[t]):[].concat(Object(d.a)(e.slice(e.length-(s.corto-1),e.length)),[t])};return Object(i.useEffect)((function(){j.a.register(b.a),t.length>1?function(){var e=[],c=Object(d.a)(n);t.forEach((function(t){e.push(t[0].fecha);for(var n=[],s=0;s<t.length;s++)n.push(S(c[s],t[s].peligrosidad.peligrosidad[1]));c=[].concat(n)})),w(c),g(e)}():1==t.length&&(g((function(e){return S(e,t[0][0].fecha)})),w((function(e){for(var c=[],n=0;n<t[0].length;n++)c.push(S(e[n],t[0][n].peligrosidad.peligrosidad[1]));return c})))}),[t]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"container-fluid",style:{minHeight:"40vh",maxHeight:"50vh"},children:[Object(f.jsx)(j.b,{data:N(p,k,y,t[0]),options:I,ref:c}),Object(f.jsx)(o.e,{className:"boton-reset",onClick:function(){c.current.resetZoom()},children:"Restablecer Zoom"})]}),Object(f.jsx)("div",{className:"mt-5",children:t[0].map((function(e,t){return Object(f.jsx)("div",{id:"accordion",children:Object(f.jsxs)(o.f,{className:"mb-0 shadow",children:[Object(f.jsx)(o.j,{className:"contenedor-cabecera",children:Object(f.jsx)(o.e,{block:!0,className:"text-left m-0 p-0 ",onClick:function(){return O(u===t?null:t)},children:Object(f.jsx)("h5",{className:"m-0 p-0",children:Object(f.jsxs)("span",{className:"text-color",children:[e.tipo," - ",e.nombre," (",e.alias,")"]})})})}),Object(f.jsx)(o.l,{show:u===t,children:Object(f.jsxs)(o.g,{children:[Object(f.jsx)("pre",{children:Object(f.jsxs)("h6",{children:["Fecha : ",e.fecha," "]})}),Object(f.jsx)("pre",{children:Object(f.jsxs)("h6",{children:["Tendencia (sostenida) :"," ",e.peligrosidad.peligrosidad[0].toFixed(4)]})}),Object(f.jsx)("pre",{children:Object(f.jsxs)("h6",{children:["Peligro (actual) :"," ",e.peligrosidad.peligrosidad[1].toFixed(4)]})}),Object(f.jsx)("pre",{children:Object(f.jsxs)("h6",{children:["Cambio f(t) (sostenido) :"," ",e.peligrosidad.deltay[1].toFixed(4)]})}),Object(f.jsx)("pre",{children:Object(f.jsxs)("h6",{children:["Cambio f(t) (actual) :"," ",e.peligrosidad.deltay[1].toFixed(4)]})})]})})]})},t)}))})]})},S=function(e){var t=e.graficaActiva,c=e.idx,n=Object(i.useState)("Basica"),s=Object(a.a)(n,2),r=s[0],l=s[1];return Object(f.jsxs)(o.f,{className:"shadow",children:[Object(f.jsx)(o.j,{className:"contenedor-cabecera",children:Object(f.jsxs)(o.M,{className:"justify-content-between align-items-center",children:[Object(f.jsx)(o.k,{sm:"6",className:"my-2",children:Object(f.jsx)("h5",{className:"m-0",children:t.nombre})}),Object(f.jsx)(o.k,{sm:"6",className:"my-2",children:Object(f.jsx)(o.k,{xs:"12",children:"sensores"===t.datos.tipo?Object(f.jsxs)(o.N,{custom:!0,name:"select",id:"select",value:r,onChange:function(e){l(e.target.value)},children:[Object(f.jsx)("option",{value:"Basica",children:"Basica"}),Object(f.jsx)("option",{value:"Nivel",children:"Nivel"}),Object(f.jsx)("option",{value:"Tendencia",children:"Tendencia"})]}):null})})]})}),Object(f.jsxs)(o.g,{children:[Object(f.jsx)("div",{className:"Basica"===r?"":"ocultar",children:Object(f.jsx)(p,{sensores:t.datos.valores})}),"sensores"===t.datos.tipo?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:"Nivel"===r?"":"ocultar",children:Object(f.jsx)(k,{sensores:t.datos.valores})}),Object(f.jsx)("div",{className:"Tendencia"===r?"":"ocultar",children:Object(f.jsx)(w,{sensores:t.datos.valores})})]}):null]})]},c)},C=c(189),T=function(e){var t=e.idElemento,c=h.a.getState().graficasDatos,n=Object(i.useState)([]),d=Object(a.a)(n,2),j=d[0],b=d[1],O=Object(i.useState)(!1),x=Object(a.a)(O,2),m=x[0],p=x[1],g=Object(i.useRef)(null),v=localStorage.getItem("token"),E=t,k=function(){var e=Object(r.a)(s.a.mark((function e(){var t,n,r,i,o,d,j,h,f,O,x,m,p,g,k,N;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.d)(v,E);case 2:return t=e.sent,n=t.sensores,r=t.variables,i=t.graficas,o="",n.length>0&&(o=n[0].direccion.substr(0,5)),e.next=10,Object(u.n)(o,v);case 10:return d=e.sent,j=d.sensores,h=[],f=[],r.forEach((function(e){f.push("".concat(E,".V").concat(e.index))})),n.forEach((function(e){h.push("".concat(e.direccion))})),e.next=18,Promise.all([Object(u.i)(h,v,c.corto),Object(u.h)(h,v,c.corto),Object(u.j)(h,v,c.corto),Object(u.f)(f,v,c.corto)]);case 18:O=e.sent,x=Object(a.a)(O,4),m=x[0].sensores,p=x[1].sensores,g=x[2].sensores,k=x[3].variables,m=m.reverse(),p=p.reverse(),g=g.reverse(),k=k.reverse(),N=[],i.forEach((function(e){for(var t=[],c=function(c){var s=[],a=[];e.direcciones.forEach((function(e){if("V"===e[0]){var t=r.find((function(t){return t.index===parseInt(e.substring(1))}));"activo"===t.estado&&s.push(Object(l.a)({nombre:t.nombre,alias:t.alias,tipo:"V"},k[c][parseInt(t.index)]))}else{var i=parseInt(e.substring(1)),o=n[i].direccion,u=o.substring(o.indexOf(".")+2),d=j.find((function(e){return e.index===parseInt(u)}));"activo"===d.estado&&a.push(Object(l.a)(Object(l.a)(Object(l.a)({nombre:d.nombre,alias:d.alias,tipo:"S"},m[c][i]),p[c][i]),g[c][i]))}})),s.length>0&&t.push(s),a.length>0&&t.push(a)},s=0;s<k.length;s++)c(s);t.length>0&&N.push("V"===e.direcciones[0][0]?{nombre:e.nombre,datos:{tipo:"variables",valores:t}}:{nombre:e.nombre,datos:{tipo:"sensores",valores:t}})})),b(N);case 31:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){return function(){null!=g.current&&clearInterval(g.current)}}),[]),Object(i.useEffect)(Object(r.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),null!=g.current&&(clearInterval(g.current),g.current=null),e.next=4,k();case 4:g.current=setInterval(Object(r.a)(s.a.mark((function e(){var t,c,n,r,i,o,d,j,h,f,O,x,m,p,g,k;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.d)(v,E);case 2:return t=e.sent,c=t.sensores,n=t.variables,r=t.graficas,i="",c.length>0&&(i=c[0].direccion.substr(0,5)),e.next=10,Object(u.n)(i,v);case 10:return o=e.sent,d=o.sensores,j=[],h=[],n.forEach((function(e){h.push("".concat(E,".V").concat(e.index))})),c.forEach((function(e){j.push("".concat(e.direccion))})),e.next=18,Promise.all([Object(u.i)(j,v,1),Object(u.h)(j,v,1),Object(u.j)(j,v,1),Object(u.f)(h,v,1)]);case 18:f=e.sent,O=Object(a.a)(f,4),x=O[0].sensores,m=O[1].sensores,p=O[2].sensores,g=O[3].variables,k=[],r.forEach((function(e){for(var t=[],s=function(s){var r=[],a=[];e.direcciones.forEach((function(e){if("V"===e[0]){var t=n.find((function(t){return t.index===parseInt(e.substring(1))}));"activo"===t.estado&&r.push(Object(l.a)({nombre:t.nombre,alias:t.alias,tipo:"V"},g[s][parseInt(t.index)]))}else{var i=parseInt(e.substring(1)),o=c[i].direccion,u=o.substring(o.indexOf(".")+2),j=d.find((function(e){return e.index===parseInt(u)}));"activo"===j.estado&&a.push(Object(l.a)(Object(l.a)(Object(l.a)({nombre:j.nombre,alias:j.alias,tipo:"S"},x[s][i]),m[s][i]),p[s][i]))}})),r.length>0&&t.push(r),a.length>0&&t.push(a)},r=0;r<g.length;r++)s(r);t.length>0&&k.push("V"===e.direcciones[0][0]?{nombre:e.nombre,datos:{tipo:"variables",valores:t}}:{nombre:e.nombre,datos:{tipo:"sensores",valores:t}})})),b(k);case 27:case"end":return e.stop()}}),e)}))),3e4),p(!1);case 6:case"end":return e.stop()}}),e)}))),[t]),m?Object(f.jsx)("div",{style:{display:"grid",placeItems:"center",height:"40vh"},children:Object(f.jsx)(C.a,{height:"10vh"})}):Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(o.M,{children:j.map((function(e,t){return Object(f.jsx)(o.k,{sm:"12",md:"6",children:Object(f.jsx)(S,{graficaActiva:e,idx:t})},t)}))})})},M=function(e){var t=e.idElemento,c=h.a.getState().graficasDatos,n=Object(i.useState)([]),d=Object(a.a)(n,2),j=d[0],b=d[1],O=Object(i.useState)(!0),x=Object(a.a)(O,2),m=x[0],p=x[1],g=Object(i.useRef)(null),v=localStorage.getItem("token"),E=t,N=function(){var e=Object(r.a)(s.a.mark((function e(){var t,n,r,a,i,o,d,j,h,f;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.d)(v,E);case 2:return t=e.sent,n=t.sensores,r=t.graficas,a="",n.length>0&&(a=n[0].direccion.substr(0,5)),e.next=9,Object(u.n)(a,v);case 9:return i=e.sent,o=i.sensores,d=[],n.forEach((function(e){d.push("".concat(e.direccion))})),e.next=15,Object(u.h)(d,v,c.corto);case 15:j=e.sent,h=(h=j.sensores).reverse(),f=[],0,r.forEach((function(e){for(var t=[],c=function(c){0;var s=[];e.direcciones.forEach((function(e){if("S"===e[0]){var t=parseInt(e.substring(1)),r=n[t].direccion,a=r.slice(r.indexOf(".")+2,r.length),i=o.find((function(e){return e.index===parseInt(a)}));"activo"===i.estado&&(s.push(Object(l.a)({nombre:i.nombre,alias:i.alias,tipo:"S"},h[c][t])),1)}})),s.length>0&&t.push(s)},s=0;s<h.length;s++)c(s);t.length>0&&f.push({nombre:e.nombre,datos:t})})),b(f);case 22:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(r.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setInterval(Object(r.a)(s.a.mark((function e(){var t,c,n,r,a,i,o,d,j,h;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.d)(v,E);case 2:return t=e.sent,c=t.sensores,n=t.graficas,r="",c.length>0&&(r=c[0].direccion.substr(0,5)),e.next=9,Object(u.n)(r,v);case 9:return a=e.sent,i=a.sensores,o=[],c.forEach((function(e){o.push("".concat(e.direccion))})),e.next=15,Object(u.h)(o,v,1);case 15:d=e.sent,j=(j=d.sensores).reverse(),h=[],n.forEach((function(e){for(var t=[],n=function(n){var s=[];e.direcciones.forEach((function(e){if("S"===e[0]){var t=parseInt(e.substring(1)),r=c[t].direccion,a=r.slice(r.indexOf(".")+2,r.length),o=i.find((function(e){return e.index===parseInt(a)}));"activo"===o.estado&&s.push(Object(l.a)({nombre:o.nombre,alias:o.alias,tipo:"S"},j[n][t]))}})),s.length>0&&t.push(s)},s=0;s<j.length;s++)n(s);t.length>0&&h.push({nombre:e.nombre,datos:t})})),b(h);case 21:case"end":return e.stop()}}),e)}))),3e4);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){return function(){null!=g.current&&clearInterval(g.current)}}),[]),Object(i.useEffect)(Object(r.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!=g.current&&(clearInterval(g.current),g.current=null),p(!0),e.next=4,N();case 4:g.current=I(),p(!1);case 6:case"end":return e.stop()}}),e)}))),[t]),m?Object(f.jsx)("div",{style:{display:"grid",placeItems:"center",height:"40vh"},children:Object(f.jsx)(C.a,{height:"10vh"})}):Object(f.jsx)(o.M,{children:j.map((function(e,t){return Object(f.jsx)(o.k,{sm:"12",md:"6",children:Object(f.jsxs)(o.f,{className:"shadow",children:[Object(f.jsx)(o.j,{className:"contenedor-cabecera",children:Object(f.jsx)("h6",{className:"m-2",children:e.nombre})}),Object(f.jsx)(o.g,{children:Object(f.jsx)(k,{sensores:e.datos})})]})},t)}))})},R=c(66),F=function(e){var t=e.idElemento,c=Object(R.d)().getState().graficasDatos,n=Object(i.useState)([]),d=Object(a.a)(n,2),j=d[0],b=d[1],h=Object(i.useState)(!0),O=Object(a.a)(h,2),x=O[0],m=O[1],g=Object(i.useRef)(null),v=localStorage.getItem("token"),E=t,k=function(){var e=Object(r.a)(s.a.mark((function e(){var t,n,r,i,o,d,j,h,f,O,x,m,p,g;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.d)(v,E);case 2:return t=e.sent,n=t.sensores,r=t.variables,i=t.graficas,o="",n.length>0&&(o=n[0].direccion.substr(0,5)),e.next=10,Object(u.n)(o,v);case 10:return d=e.sent,j=d.sensores,h=[],f=[],r.forEach((function(e){f.push("".concat(E,".V").concat(e.index))})),n.forEach((function(e){h.push("".concat(e.direccion))})),e.next=18,Promise.all([Object(u.i)(h,v,c.corto),Object(u.f)(f,v,c.corto)]);case 18:O=e.sent,x=Object(a.a)(O,2),m=x[0].sensores,p=x[1].variables,console.log(p),p=p.reverse(),m=m.reverse(),g=[],i.forEach((function(e){for(var t=[],c=function(c){var s=[],a=[];e.direcciones.forEach((function(e){if("V"===e[0]){var t=r.find((function(t){return t.index===parseInt(e.substring(1))}));"activo"===t.estado&&s.push(Object(l.a)({nombre:t.nombre,alias:t.alias,tipo:"V"},p[c][parseInt(t.index)]))}else{var i=parseInt(e.substring(1)),o=n[i].direccion,u=o.substring(o.indexOf(".")+2),d=j.find((function(e){return e.index===parseInt(u)}));"activo"===d.estado&&a.push(Object(l.a)({nombre:d.nombre,alias:d.alias,tipo:"S"},m[c][i]))}})),s.length>0&&t.push(s),a.length>0&&t.push(a)},s=0;s<p.length;s++)c(s);t.length>0&&g.push({nombre:e.nombre,datos:t})})),b(g);case 28:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){return function(){null!=g.current&&clearInterval(g.current)}}),[]),Object(i.useEffect)(Object(r.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),null!=g.current&&(clearInterval(g.current),g.current=null),e.next=4,k();case 4:g.current=setInterval(Object(r.a)(s.a.mark((function e(){var t,c,n,r,i,o,d,j,h,f,O,x,m,p;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.d)(v,E);case 2:return t=e.sent,c=t.sensores,n=t.variables,r=t.graficas,i="",c.length>0&&(i=c[0].direccion.substr(0,5)),e.next=10,Object(u.n)(i,v);case 10:return o=e.sent,d=o.sensores,j=[],h=[],n.forEach((function(e){h.push("".concat(E,".V").concat(e.index))})),c.forEach((function(e){j.push("".concat(e.direccion))})),e.next=18,Promise.all([Object(u.i)(j,v,1),Object(u.f)(h,v,1)]);case 18:f=e.sent,O=Object(a.a)(f,2),x=O[0].sensores,m=O[1].variables,p=[],r.forEach((function(e){for(var t=[],s=function(s){var r=[],a=[];e.direcciones.forEach((function(e){if("V"===e[0]){var t=n.find((function(t){return t.index===parseInt(e.substring(1))}));"activo"===t.estado&&r.push(Object(l.a)({nombre:t.nombre,alias:t.alias,tipo:"V"},m[s][parseInt(t.index)]))}else{var i=parseInt(e.substring(1)),o=c[i].direccion,u=o.substring(o.indexOf(".")+2),j=d.find((function(e){return e.index===parseInt(u)}));"activo"===j.estado&&a.push(Object(l.a)({nombre:j.nombre,alias:j.alias,tipo:"S"},x[s][i]))}})),r.length>0&&t.push(r),a.length>0&&t.push(a)},r=0;r<m.length;r++)s(r);t.length>0&&p.push({nombre:e.nombre,datos:t})})),b(p);case 25:case"end":return e.stop()}}),e)}))),3e4),m(!1);case 6:case"end":return e.stop()}}),e)}))),[t]),x?Object(f.jsx)("div",{style:{display:"grid",placeItems:"center",height:"40vh"},children:Object(f.jsx)(C.a,{height:"10vh"})}):Object(f.jsx)("div",{children:Object(f.jsx)(o.M,{children:j.map((function(e,t){return Object(f.jsx)(o.k,{sm:"12",md:"6",children:Object(f.jsxs)(o.f,{className:"shadow",children:[Object(f.jsx)(o.j,{className:"contenedor-cabecera",children:Object(f.jsx)("h6",{className:"m-2",children:e.nombre})}),Object(f.jsx)(o.g,{children:Object(f.jsx)(p,{sensores:e.datos})})]})},t)}))})})},V=function(e){var t=e.idElemento,c=h.a.getState().graficasDatos,n=Object(i.useState)([]),d=Object(a.a)(n,2),j=d[0],b=d[1],O=Object(i.useState)(!0),x=Object(a.a)(O,2),m=x[0],p=x[1],g=Object(i.useRef)(null),v=localStorage.getItem("token"),E=t,k=function(){var e=Object(r.a)(s.a.mark((function e(){var t,n,r,a,i,o,d,j,h,f;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.d)(v,E);case 2:return t=e.sent,n=t.sensores,r=t.graficas,a="",n.length>0&&(a=n[0].direccion.substr(0,5)),e.next=9,Object(u.n)(a,v);case 9:return i=e.sent,o=i.sensores,d=[],n.forEach((function(e){d.push("".concat(e.direccion))})),e.next=15,Object(u.j)(d,v,c.corto);case 15:j=e.sent,h=(h=j.sensores).reverse(),f=[],r.forEach((function(e){for(var t=[],c=function(c){var s=[];e.direcciones.forEach((function(e){if("S"===e[0]){var t=parseInt(e.substring(1)),r=n[t].direccion,a=r.substring(r.indexOf(".")+2),i=o.find((function(e){return e.index===parseInt(a)}));"activo"===i.estado&&s.push(Object(l.a)({nombre:i.nombre,alias:i.alias,tipo:"S"},h[c][t]))}})),s.length>0&&t.push(s)},s=0;s<h.length;s++)c(s);t.length>0&&f.push({nombre:e.nombre,datos:t})})),b(f);case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){return function(){null!=g.current&&clearInterval(g.current)}}),[]),Object(i.useEffect)(Object(r.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),null!=g.current&&(clearInterval(g.current),g.current=null),e.next=4,k();case 4:g.current=setInterval(Object(r.a)(s.a.mark((function e(){var t,c,n,r,a,i,o,d,j,h;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.d)(v,E);case 2:return t=e.sent,c=t.sensores,n=t.graficas,r="",c.length>0&&(r=c[0].direccion.substr(0,5)),e.next=9,Object(u.n)(r,v);case 9:return a=e.sent,i=a.sensores,o=[],c.forEach((function(e){o.push("".concat(e.direccion))})),e.next=15,Object(u.j)(o,v,1);case 15:d=e.sent,j=(j=d.sensores).reverse(),h=[],n.forEach((function(e){for(var t=[],n=function(n){var s=[];e.direcciones.forEach((function(e){if("S"===e[0]){var t=parseInt(e.substring(1)),r=c[t].direccion,a=r.slice(r.indexOf(".")+2,r.length),o=i.find((function(e){return e.index===parseInt(a)}));"activo"===o.estado&&s.push(Object(l.a)({nombre:o.nombre,alias:o.alias,tipo:"S"},j[n][t]))}})),s.length>0&&t.push(s)},s=0;s<j.length;s++)n(s);t.length>0&&h.push({nombre:e.nombre,datos:t})})),b(h);case 21:case"end":return e.stop()}}),e)}))),3e4),p(!1);case 6:case"end":return e.stop()}}),e)}))),[t]),m?Object(f.jsx)("div",{style:{display:"grid",placeItems:"center",height:"40vh"},children:Object(f.jsx)(C.a,{height:"10vh"})}):Object(f.jsx)(o.M,{children:j.map((function(e,t){return Object(f.jsx)(o.k,{sm:"12",md:"6",children:Object(f.jsxs)(o.f,{className:"shadow",children:[Object(f.jsx)(o.j,{className:"contenedor-cabecera",children:Object(f.jsx)("h6",{className:"m-2",children:e.nombre})}),Object(f.jsx)(o.g,{children:Object(f.jsx)(w,{sensores:e.datos})})]})},t)}))})},L=c(587),A=c(75),G=c(586);t.default=function(e){var t=e.match.params.idElemento,c=e.history,n=Object(i.useState)({nombre:"",identificador:"",descripcion:"",area:"",linea:"",tipo:"",proceso:"",estado:"inactivo",icono:G.a}),l=Object(a.a)(n,2),d=l[0],j=l[1],b=Object(i.useState)(!0),h=Object(a.a)(b,2),O=h[0],x=h[1],m=Object(i.useRef)(null),p=localStorage.getItem("token"),g=t,v=function(){var e=Object(r.a)(s.a.mark((function e(){var t,c,n,r,a,i,o,l,d,b,h;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.d)(p,g);case 2:t=e.sent,c=t.nombre,n=t.identificador,r=t.descripcion,a=t.area,i=t.linea,o=t.proceso,l=t.tipo,d=t.estado,b="activo"==d?A.a:G.a,h=d[0].toUpperCase()+d.substring(1),j({nombre:c,identificador:n,descripcion:r,area:a,linea:i,tipo:l,proceso:o,icono:b,estado:h});case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){return function(){null!=m.current&&clearInterval(m.current)}}),[]),Object(i.useEffect)(Object(r.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),null!=m.current&&(clearInterval(m.current),m.current=null),e.next=4,v();case 4:m.current=setInterval(v,3e4),x(!1);case 6:case"end":return e.stop()}}),e)}))),[t]),O?Object(f.jsx)("div",{style:{display:"grid",placeItems:"center",height:"40vh"},children:Object(f.jsx)(C.a,{height:"10vh"})}):Object(f.jsxs)(o.m,{fluid:!0,children:[Object(f.jsx)(L.b,{activo:2,tipo:L.a.ELEMENTO,history:c,direccion:g}),Object(f.jsx)(o.M,{children:Object(f.jsx)(o.k,{sm:"12",children:Object(f.jsx)(o.f,{className:"shadow",children:Object(f.jsx)(o.g,{children:Object(f.jsxs)(o.M,{className:"justify-content-between",children:[Object(f.jsxs)(o.k,{className:"col-3 d-flex align-items-center",children:[Object(f.jsx)("img",{src:d.icono,className:"icono"}),Object(f.jsx)("h4",{className:"ml-2",children:d.estado})]}),Object(f.jsxs)(o.k,{className:"col-9 text-right",children:[Object(f.jsx)("h5",{children:"Elemento"}),Object(f.jsx)("h3",{children:"".concat(d.nombre)})]})]})})})})}),Object(f.jsx)(o.M,{children:Object(f.jsx)(o.k,{children:Object(f.jsxs)(o.f,{className:"shadow",children:[Object(f.jsx)(o.j,{className:"contenedor-cabecera-principal",children:"General"}),Object(f.jsx)(o.g,{children:Object(f.jsxs)(o.H,{accent:!0,children:[Object(f.jsxs)(o.M,{children:[Object(f.jsx)(o.k,{sm:"4",children:Object(f.jsx)(o.I,{accent:"info",children:"Identificador :"})}),Object(f.jsx)(o.k,{sm:"4",className:"align-self-center",children:d.identificador})]}),Object(f.jsxs)(o.M,{children:[Object(f.jsx)(o.k,{sm:"4",children:Object(f.jsx)(o.I,{accent:"info",children:"Descripci\xf3n :"})}),Object(f.jsx)(o.k,{sm:"4",className:"align-self-center",children:d.descripcion})]}),Object(f.jsxs)(o.M,{children:[Object(f.jsx)(o.k,{sm:"4",children:Object(f.jsx)(o.I,{accent:"info",children:"Area :"})}),Object(f.jsx)(o.k,{sm:"4",className:"align-self-center",children:d.area})]}),Object(f.jsxs)(o.M,{children:[Object(f.jsx)(o.k,{sm:"4",children:Object(f.jsx)(o.I,{accent:"info",children:"Linea :"})}),Object(f.jsx)(o.k,{sm:"4",className:"align-self-center",children:d.linea})]}),Object(f.jsxs)(o.M,{children:[Object(f.jsx)(o.k,{sm:"4",children:Object(f.jsx)(o.I,{accent:"info",children:"Proceso :"})}),Object(f.jsx)(o.k,{sm:"4",className:"align-self-center",children:d.proceso})]}),Object(f.jsxs)(o.M,{children:[Object(f.jsx)(o.k,{sm:"4",children:Object(f.jsx)(o.I,{accent:"info",children:"Tipo :"})}),Object(f.jsx)(o.k,{sm:"4",className:"align-self-center",children:d.tipo})]})]})})]})})}),Object(f.jsx)(o.M,{children:Object(f.jsx)(o.k,{sm:"12",children:Object(f.jsxs)(o.f,{className:"shadow",children:[Object(f.jsxs)(o.j,{className:"contenedor-cabecera-principal",children:[Object(f.jsx)("i",{className:"far fa-chart-bar"})," ",Object(f.jsx)("span",{children:" Graficas "})]}),Object(f.jsx)(o.g,{children:Object(f.jsxs)(o.Z,{activeTab:"custom",children:[Object(f.jsxs)(o.J,{variant:"tabs",children:[Object(f.jsx)(o.K,{children:Object(f.jsx)(o.L,{"data-tab":"custom",children:"Custom"})}),Object(f.jsx)(o.K,{children:Object(f.jsx)(o.L,{"data-tab":"basica",children:"Basica"})}),Object(f.jsx)(o.K,{children:Object(f.jsx)(o.L,{"data-tab":"nivel",children:"Nivel"})}),Object(f.jsx)(o.K,{children:Object(f.jsx)(o.L,{"data-tab":"tendencia",children:"Tendencia"})})]}),Object(f.jsxs)(o.X,{children:[Object(f.jsxs)(o.Y,{"data-tab":"custom",children:[" ",Object(f.jsx)("div",{className:"mt-4",children:Object(f.jsx)(T,{idElemento:t})})," "]}),Object(f.jsxs)(o.Y,{"data-tab":"basica",children:[" ",Object(f.jsxs)("div",{className:"mt-4",children:[Object(f.jsx)(F,{idElemento:t})," "]})]}),Object(f.jsxs)(o.Y,{"data-tab":"nivel",children:[" ",Object(f.jsxs)("div",{className:"mt-4",children:[Object(f.jsx)(M,{idElemento:t})," "]})]}),Object(f.jsxs)(o.Y,{"data-tab":"tendencia",children:[" ",Object(f.jsx)("div",{className:"mt-4",children:Object(f.jsx)(V,{idElemento:t})})," "]})]})]})})]})})})]})}}}]);
//# sourceMappingURL=8.eb5b6235.chunk.js.map